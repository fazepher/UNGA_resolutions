<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 Data | Multidimensional Ideal Points of Mexican Foreign Policy at the UNGA</title>
  <meta name="description" content="2 Data | Multidimensional Ideal Points of Mexican Foreign Policy at the UNGA" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="2 Data | Multidimensional Ideal Points of Mexican Foreign Policy at the UNGA" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 Data | Multidimensional Ideal Points of Mexican Foreign Policy at the UNGA" />
  
  
  

<meta name="author" content="Fernando A. Zepeda Herrera" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="references.html"/>
<script src="libs/header-attrs-2.9.1/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Probando Bookdown</a></li>
<li class="chapter" data-level="2" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>2</b> Data</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data.html"><a href="data.html#general-assembly-session-compilation"><i class="fa fa-check"></i><b>2.1</b> General Assembly Session Compilation</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="data.html"><a href="data.html#download-and-import"><i class="fa fa-check"></i><b>2.1.1</b> Download and Import</a></li>
<li class="chapter" data-level="2.1.2" data-path="data.html"><a href="data.html#data-cleaning"><i class="fa fa-check"></i><b>2.1.2</b> Data cleaning</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="data.html"><a href="data.html#voting-data"><i class="fa fa-check"></i><b>2.2</b> Voting Data</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>3</b> References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Multidimensional Ideal Points of Mexican Foreign Policy at the UNGA</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data" class="section level1" number="2">
<h1><span class="header-section-number">2</span> Data</h1>
<div id="general-assembly-session-compilation" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> General Assembly Session Compilation</h2>
<p>According to the <a href="https://research.un.org/en/docs/ga/resolutions">Dag Hammarskjöld Library</a> website <span class="citation">(Kurtas, n.d.a)</span>:</p>
<blockquote>
<p>For each session of the General Assembly, resolutions and decisions are compiled and issued as a supplement to the General Assembly Official Records (GAOR) […] For regular sessions, starting with the 42nd session, the document has been assigned number 49, and is Supplement 49 to the GAOR. Currently, there are usually 3 volumes</p>
</blockquote>
<p>As we are interested in <em>resolutions</em>, we would need volumes I and III which contain, respectively, those adopted by the GA in the September-December and January-September periods of each regular session. These documents are identified by their symbols <code>A/[Sess.N.]/49Vol(I.)</code> or <code>A/[Sess.N.]/49Vol(III.)</code>, where <code>[Sess.N.]</code> is a placeholder for the session number. For example, the resolutions for the 74th session, adopted between September and December 2019 would be compiled in the document <code>A/74/49Vol(I.)</code> and found at <a href="https://undocs.org/en/A/74/49(Vol.I)">https://undocs.org/en/A/74/49(Vol.I)</a>.</p>
<div id="download-and-import" class="section level3" number="2.1.1">
<h3><span class="header-section-number">2.1.1</span> Download and Import</h3>
<p>Starting from the 67th session of the UNGA, there is a common machine readable format for these pdf. This allows us to download them (in a folder named <code>resol_pdf</code>) and import them separately into <code>R</code> each as a character vector with one element per document page.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="data.html#cb2-1" aria-hidden="true" tabindex="-1"></a>vol_1_all <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="fu">here</span>(<span class="st">&quot;resol_pdf&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb2-2"><a href="data.html#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">keep</span>(<span class="sc">~</span><span class="fu">str_detect</span>(.x,<span class="st">&quot;Vol.I</span><span class="sc">\\</span><span class="st">)&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb2-3"><a href="data.html#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rev</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb2-4"><a href="data.html#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="sc">~</span><span class="fu">pdf_text</span>(<span class="fu">here</span>(<span class="st">&quot;resol_pdf&quot;</span>,.x)))</span>
<span id="cb2-5"><a href="data.html#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="data.html#cb2-6" aria-hidden="true" tabindex="-1"></a>vol_3_all <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="fu">here</span>(<span class="st">&quot;resol_pdf&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb2-7"><a href="data.html#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">keep</span>(<span class="sc">~</span><span class="fu">str_detect</span>(.x,<span class="st">&quot;Vol.III</span><span class="sc">\\</span><span class="st">)&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb2-8"><a href="data.html#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rev</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb2-9"><a href="data.html#cb2-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="sc">~</span><span class="fu">pdf_text</span>(<span class="fu">here</span>(<span class="st">&quot;resol_pdf&quot;</span>,.x)))</span></code></pre></div>
<p>We need two different lists, one for each type of volume since the respective document structures are slightly different.</p>
<p>For <strong>Volume I</strong> documents:</p>
<ul>
<li><p>The first 4 pdf pages typically contain the cover, a note on resolutions and decisions, the main table of contents, and a blank page. Numbered pages thus start at pdf page 5. An exception is document <code>A/70/49(Vol.I)</code> where there is no such blank page and numbered pages start at pdf page 4.</p></li>
<li><p>The document then is split in its 7 main sections, each containing their own (sub) table of contents. Each section contains resolutions that refer to either none (first section) or one of the <a href="https://www.un.org/en/ga/maincommittees/index.shtml">6 main committees of the General Assambly</a> <span class="citation">(Nations 2021)</span>:</p>
<ol style="list-style-type: decimal">
<li>First Committee (Disarmament &amp; International Security)</li>
<li>Second Committee (Economic &amp; Financial)</li>
<li>Third Committee (Social, Humanitarian &amp; Cultural)</li>
<li>Fourth Committee (Special Political &amp; Decolonization)</li>
<li>Fifth Committee (Administrative &amp; Budgetary)</li>
<li>Sixth Committee (Legal)</li>
</ol></li>
<li><p>The document finishes with 2 annexes.</p></li>
</ul>
<p>For <strong>Volume III</strong> documents:</p>
<ul>
<li><p>The first 4 pdf pages follow the same pattern as Vol. I. documents.</p></li>
<li><p>The document then is split in its 4 main sections. We are only interested in the first 3 as they contain resolutions:</p>
<ol style="list-style-type: decimal">
<li>Without reference to a Main Committee</li>
<li>In relation to the Fourth Committee (Special Political &amp; Decolonization)</li>
<li>In relation to the Fifth Committee (Administrative &amp; Budgetary)</li>
</ol></li>
</ul>
<p>The 4th main section contains decissions of the General Assembly.</p>
<ul>
<li>The document finishes with 2 annexes.</li>
</ul>
</div>
<div id="data-cleaning" class="section level3" number="2.1.2">
<h3><span class="header-section-number">2.1.2</span> Data cleaning</h3>
<p>We shall start parsing the pdfs by extracting their main table of contents via the following function:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="data.html#cb3-1" aria-hidden="true" tabindex="-1"></a>extract_toc <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">vol =</span> <span class="dv">1</span>){</span>
<span id="cb3-2"><a href="data.html#cb3-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-3"><a href="data.html#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># We extract page 3 of the document x</span></span>
<span id="cb3-4"><a href="data.html#cb3-4" aria-hidden="true" tabindex="-1"></a>  raw_toc <span class="ot">&lt;-</span> x[[<span class="dv">3</span>]] <span class="sc">%&gt;%</span> </span>
<span id="cb3-5"><a href="data.html#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_split</span>(<span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-6"><a href="data.html#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unlist</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb3-7"><a href="data.html#cb3-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_trim</span>()</span>
<span id="cb3-8"><a href="data.html#cb3-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-9"><a href="data.html#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># The section for the 4th Committee is expected to be divided between lines </span></span>
<span id="cb3-10"><a href="data.html#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># We then extract the table for the main sections </span></span>
<span id="cb3-11"><a href="data.html#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># We assume the first two lines are &quot;Content&quot; and &quot;Section/Page&quot;</span></span>
<span id="cb3-12"><a href="data.html#cb3-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># This is different depending on the volume</span></span>
<span id="cb3-13"><a href="data.html#cb3-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-14"><a href="data.html#cb3-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(vol <span class="sc">==</span> <span class="dv">1</span>){</span>
<span id="cb3-15"><a href="data.html#cb3-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">#  In volume 1</span></span>
<span id="cb3-16"><a href="data.html#cb3-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-17"><a href="data.html#cb3-17" aria-hidden="true" tabindex="-1"></a>    <span class="co">#  The 4th Committee section is divided between lines 5 and 6 of the raw toc </span></span>
<span id="cb3-18"><a href="data.html#cb3-18" aria-hidden="true" tabindex="-1"></a>    raw_toc[<span class="dv">5</span>] <span class="ot">&lt;-</span> <span class="fu">paste</span>(raw_toc[<span class="dv">5</span><span class="sc">:</span><span class="dv">6</span>],<span class="at">collapse =</span> <span class="st">&quot; &quot;</span>)</span>
<span id="cb3-19"><a href="data.html#cb3-19" aria-hidden="true" tabindex="-1"></a>    raw_toc <span class="ot">&lt;-</span> raw_toc[<span class="sc">-</span><span class="dv">6</span>]</span>
<span id="cb3-20"><a href="data.html#cb3-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-21"><a href="data.html#cb3-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># we have 7 main sections assuming (corrected) lines 3 to 9 </span></span>
<span id="cb3-22"><a href="data.html#cb3-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># we also identify the page where annexes start, assuming it&#39;s line 11</span></span>
<span id="cb3-23"><a href="data.html#cb3-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-24"><a href="data.html#cb3-24" aria-hidden="true" tabindex="-1"></a>    clean_toc <span class="ot">&lt;-</span> raw_toc[<span class="dv">3</span><span class="sc">:</span><span class="dv">9</span>] <span class="sc">%&gt;%</span> </span>
<span id="cb3-25"><a href="data.html#cb3-25" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_split_fixed</span>(<span class="at">pattern =</span> <span class="st">&quot;(</span><span class="sc">\\</span><span class="st">.{2,})&quot;</span>, <span class="at">n =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-26"><a href="data.html#cb3-26" aria-hidden="true" tabindex="-1"></a>      <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb3-27"><a href="data.html#cb3-27" aria-hidden="true" tabindex="-1"></a>      <span class="fu">tibble</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb3-28"><a href="data.html#cb3-28" aria-hidden="true" tabindex="-1"></a>      <span class="fu">transmute</span>(<span class="at">Section =</span> <span class="fu">str_trim</span>(V1), </span>
<span id="cb3-29"><a href="data.html#cb3-29" aria-hidden="true" tabindex="-1"></a>                <span class="at">Start_Page =</span> <span class="fu">str_trim</span>(V2) <span class="sc">%&gt;%</span> as.integer,</span>
<span id="cb3-30"><a href="data.html#cb3-30" aria-hidden="true" tabindex="-1"></a>                <span class="at">Annex_Page =</span> <span class="fu">str_extract</span>(raw_toc[<span class="dv">11</span>],<span class="st">&quot;</span><span class="sc">\\</span><span class="st">d+$&quot;</span>) <span class="sc">%&gt;%</span> as.integer)</span>
<span id="cb3-31"><a href="data.html#cb3-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-32"><a href="data.html#cb3-32" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb3-33"><a href="data.html#cb3-33" aria-hidden="true" tabindex="-1"></a>    <span class="co">#  In volume 3 </span></span>
<span id="cb3-34"><a href="data.html#cb3-34" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-35"><a href="data.html#cb3-35" aria-hidden="true" tabindex="-1"></a>    <span class="co">#  The 4th Committee section is divided between lines 4 and 5 of the raw toc </span></span>
<span id="cb3-36"><a href="data.html#cb3-36" aria-hidden="true" tabindex="-1"></a>    raw_toc[<span class="dv">4</span>] <span class="ot">&lt;-</span> <span class="fu">paste</span>(raw_toc[<span class="dv">4</span><span class="sc">:</span><span class="dv">5</span>],<span class="at">collapse =</span> <span class="st">&quot; &quot;</span>)</span>
<span id="cb3-37"><a href="data.html#cb3-37" aria-hidden="true" tabindex="-1"></a>    raw_toc <span class="ot">&lt;-</span> raw_toc[<span class="sc">-</span><span class="dv">5</span>]</span>
<span id="cb3-38"><a href="data.html#cb3-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-39"><a href="data.html#cb3-39" aria-hidden="true" tabindex="-1"></a>    <span class="co"># we have 3 main sections assuming (corrected) lines 3 to 5 </span></span>
<span id="cb3-40"><a href="data.html#cb3-40" aria-hidden="true" tabindex="-1"></a>    <span class="co"># we also identify the page where decisions start, assuming it&#39;s line 6</span></span>
<span id="cb3-41"><a href="data.html#cb3-41" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-42"><a href="data.html#cb3-42" aria-hidden="true" tabindex="-1"></a>    clean_toc <span class="ot">&lt;-</span> raw_toc[<span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>] <span class="sc">%&gt;%</span> </span>
<span id="cb3-43"><a href="data.html#cb3-43" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_split_fixed</span>(<span class="at">pattern =</span> <span class="st">&quot;(</span><span class="sc">\\</span><span class="st">.{2,})&quot;</span>, <span class="at">n =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-44"><a href="data.html#cb3-44" aria-hidden="true" tabindex="-1"></a>      <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb3-45"><a href="data.html#cb3-45" aria-hidden="true" tabindex="-1"></a>      <span class="fu">tibble</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb3-46"><a href="data.html#cb3-46" aria-hidden="true" tabindex="-1"></a>      <span class="fu">transmute</span>(<span class="at">Section =</span> <span class="fu">str_trim</span>(V1), </span>
<span id="cb3-47"><a href="data.html#cb3-47" aria-hidden="true" tabindex="-1"></a>                <span class="at">Start_Page =</span> <span class="fu">str_trim</span>(V2) <span class="sc">%&gt;%</span> as.integer,</span>
<span id="cb3-48"><a href="data.html#cb3-48" aria-hidden="true" tabindex="-1"></a>                <span class="at">Annex_Page =</span> <span class="fu">str_extract</span>(raw_toc[<span class="dv">6</span>],<span class="st">&quot;</span><span class="sc">\\</span><span class="st">d+$&quot;</span>) <span class="sc">%&gt;%</span> as.integer)</span>
<span id="cb3-49"><a href="data.html#cb3-49" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-50"><a href="data.html#cb3-50" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-51"><a href="data.html#cb3-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(clean_toc)</span>
<span id="cb3-52"><a href="data.html#cb3-52" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-53"><a href="data.html#cb3-53" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>We then do a soft check on this table to ensure that the start pages effectively refer to the correct pages in the document. In short, we verify that each given start page has as an approximate header the corresponding section and that the preceding page doesn’t. We want to identify if there is some section that doesn’t satisfy these conditions. We define the following function to help us do that:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="data.html#cb4-1" aria-hidden="true" tabindex="-1"></a>soft_check_toc <span class="ot">&lt;-</span> <span class="cf">function</span>(toc, <span class="at">shift =</span> <span class="dv">4</span>, <span class="at">all_pages =</span> vol_1_all, <span class="at">n_check =</span> <span class="dv">20</span>){</span>
<span id="cb4-2"><a href="data.html#cb4-2" aria-hidden="true" tabindex="-1"></a>  toc <span class="sc">%&gt;%</span> </span>
<span id="cb4-3"><a href="data.html#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Soft_Check_Start =</span> <span class="fu">map_chr</span>(Start_Page, </span>
<span id="cb4-4"><a href="data.html#cb4-4" aria-hidden="true" tabindex="-1"></a>                                      <span class="sc">~</span> all_pages[.x <span class="sc">+</span> shift] <span class="sc">%&gt;%</span> </span>
<span id="cb4-5"><a href="data.html#cb4-5" aria-hidden="true" tabindex="-1"></a>                                        <span class="fu">str_trim</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb4-6"><a href="data.html#cb4-6" aria-hidden="true" tabindex="-1"></a>                                        <span class="fu">str_sub</span>(<span class="at">end =</span> n_check)) <span class="sc">%&gt;%</span> </span>
<span id="cb4-7"><a href="data.html#cb4-7" aria-hidden="true" tabindex="-1"></a>             <span class="fu">equals</span>(<span class="fu">str_sub</span>(Section, <span class="at">end =</span> n_check)),</span>
<span id="cb4-8"><a href="data.html#cb4-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">Soft_Check_Prev =</span> <span class="fu">map_chr</span>(Start_Page, </span>
<span id="cb4-9"><a href="data.html#cb4-9" aria-hidden="true" tabindex="-1"></a>                                     <span class="sc">~</span> all_pages[.x <span class="sc">+</span> shift <span class="sc">-</span> <span class="dv">1</span>] <span class="sc">%&gt;%</span> </span>
<span id="cb4-10"><a href="data.html#cb4-10" aria-hidden="true" tabindex="-1"></a>                                       <span class="fu">str_trim</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb4-11"><a href="data.html#cb4-11" aria-hidden="true" tabindex="-1"></a>                                       <span class="fu">str_sub</span>(<span class="at">end =</span> n_check)) <span class="sc">%&gt;%</span> </span>
<span id="cb4-12"><a href="data.html#cb4-12" aria-hidden="true" tabindex="-1"></a>             <span class="fu">equals</span>(<span class="fu">str_sub</span>(Section, <span class="at">end =</span> n_check)),</span>
<span id="cb4-13"><a href="data.html#cb4-13" aria-hidden="true" tabindex="-1"></a>           <span class="at">Soft_Check =</span> Soft_Check_Start <span class="sc">&amp;</span> <span class="sc">!</span>Soft_Check_Prev,</span>
<span id="cb4-14"><a href="data.html#cb4-14" aria-hidden="true" tabindex="-1"></a>           <span class="at">i =</span> <span class="fu">row_number</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb4-15"><a href="data.html#cb4-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="sc">!</span>Soft_Check)</span>
<span id="cb4-16"><a href="data.html#cb4-16" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>We detect that there is indeed an error on one of the Vol. I documents, that of session 75. The problem upon visual inspection is a typo in the pdf and Section II should start on page 223 not 203. We manually correct it and see that there are no further mistakes risen at this soft checkpoint.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="data.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Volume I</span></span>
<span id="cb5-2"><a href="data.html#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="data.html#cb5-3" aria-hidden="true" tabindex="-1"></a>vol_1_toc_check <span class="ot">&lt;-</span> <span class="fu">seq_along</span>(vol_1_all) <span class="sc">%&gt;%</span> </span>
<span id="cb5-4"><a href="data.html#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="sc">~</span><span class="fu">extract_toc</span>(vol_1_all[[.x]], <span class="at">vol =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb5-5"><a href="data.html#cb5-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mutate</span>(<span class="at">Session =</span> <span class="dv">76</span> <span class="sc">-</span> .x,</span>
<span id="cb5-6"><a href="data.html#cb5-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">Year =</span> <span class="dv">2021</span> <span class="sc">-</span> .x))</span>
<span id="cb5-7"><a href="data.html#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="data.html#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="fu">seq_along</span>(vol_1_toc_check) <span class="sc">%&gt;%</span> </span>
<span id="cb5-9"><a href="data.html#cb5-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="sc">~</span><span class="fu">soft_check_toc</span>(<span class="at">toc =</span> vol_1_toc_check[[.x]],</span>
<span id="cb5-10"><a href="data.html#cb5-10" aria-hidden="true" tabindex="-1"></a>                      <span class="at">all_pages =</span> vol_1_all[[.x]]))</span>
<span id="cb5-11"><a href="data.html#cb5-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-12"><a href="data.html#cb5-12" aria-hidden="true" tabindex="-1"></a>vol_1_toc_check[[<span class="dv">1</span>]]<span class="sc">$</span>Start_Page[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="dv">223</span></span>
<span id="cb5-13"><a href="data.html#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="fu">soft_check_toc</span>(<span class="at">toc =</span> vol_1_toc_check[[<span class="dv">6</span>]], <span class="at">shift =</span> <span class="dv">3</span>, <span class="at">all_pages =</span> vol_1_all[[<span class="dv">6</span>]])</span>
<span id="cb5-14"><a href="data.html#cb5-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-15"><a href="data.html#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="fu">seq_along</span>(vol_1_toc_check) <span class="sc">%&gt;%</span> </span>
<span id="cb5-16"><a href="data.html#cb5-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="sc">~</span><span class="fu">soft_check_toc</span>(<span class="at">toc =</span> vol_1_toc_check[[.x]],</span>
<span id="cb5-17"><a href="data.html#cb5-17" aria-hidden="true" tabindex="-1"></a>                      <span class="at">shift =</span> <span class="fu">if_else</span>(.x <span class="sc">==</span> <span class="dv">6</span>, <span class="dv">3</span>, <span class="dv">4</span>),</span>
<span id="cb5-18"><a href="data.html#cb5-18" aria-hidden="true" tabindex="-1"></a>                      <span class="at">all_pages =</span> vol_1_all[[.x]]))</span></code></pre></div>
<p>There are no problems identified for Vol. III documents.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="data.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Volume 3</span></span>
<span id="cb6-2"><a href="data.html#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="data.html#cb6-3" aria-hidden="true" tabindex="-1"></a>vol_3_toc_check <span class="ot">&lt;-</span> <span class="fu">seq_along</span>(vol_3_all) <span class="sc">%&gt;%</span> </span>
<span id="cb6-4"><a href="data.html#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="sc">~</span><span class="fu">extract_toc</span>(vol_3_all[[.x]], <span class="at">vol =</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb6-5"><a href="data.html#cb6-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mutate</span>(<span class="at">Session =</span> <span class="dv">75</span> <span class="sc">-</span> .x,</span>
<span id="cb6-6"><a href="data.html#cb6-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">Year =</span> <span class="dv">2020</span> <span class="sc">-</span> .x))</span>
<span id="cb6-7"><a href="data.html#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="data.html#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="fu">seq_along</span>(vol_3_toc_check) <span class="sc">%&gt;%</span> </span>
<span id="cb6-9"><a href="data.html#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="sc">~</span><span class="fu">soft_check_toc</span>(<span class="at">toc =</span> vol_3_toc_check[[.x]],</span>
<span id="cb6-10"><a href="data.html#cb6-10" aria-hidden="true" tabindex="-1"></a>                      <span class="at">all_pages =</span> vol_3_all[[.x]]))</span></code></pre></div>
<p>Once we are confident that we have identified correctly the starting pages of each section, we can also assign ending pages for each section and have our main table of contents object. Now, as said previously, each section contains a table of contents and the resolutions. In order to correctly parse resolution texts we will need to remove the headers and footers of the pages. These are usually the name of the section and the page number. We will thus be able to remove them programatically; there are, however, two exceptions that must be dealt with first. These are explained for Vol. I documents, but they are similar for Vol. III:</p>
<ul>
<li><p>The title of Section III is long enough that it’s split in two lines on its own table of contents. We must make this a single line so that our removal function works correctly.</p></li>
<li><p>The table of contents of Section VI contains a footnote that needs to be removed. It is signaled with a star <code>*</code> at the end of the title and that reads</p>
<blockquote>
<ul>
<li>Unless otherwise stated, the draft resolutions recommended in the reports were submitted by the Chair or another officer of the Bureau of the Committee.</li>
</ul>
</blockquote>
<p>The star symbol may be registered differently depending on the specific pdf so we use regular expressions to find the correct patterns to remove.</p></li>
</ul>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="data.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Volume I</span></span>
<span id="cb7-2"><a href="data.html#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="data.html#cb7-3" aria-hidden="true" tabindex="-1"></a>vol_1_toc <span class="ot">&lt;-</span> vol_1_toc_check <span class="sc">%&gt;%</span> </span>
<span id="cb7-4"><a href="data.html#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="sc">~</span>.x <span class="sc">%&gt;%</span> </span>
<span id="cb7-5"><a href="data.html#cb7-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mutate</span>(<span class="at">End_Page =</span> <span class="fu">lead</span>(Start_Page, <span class="at">default =</span> <span class="fu">unique</span>(Annex_Page))<span class="sc">-</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb7-6"><a href="data.html#cb7-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">select</span>(Section, Session, Year, Start_Page, End_Page))</span>
<span id="cb7-7"><a href="data.html#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="data.html#cb7-8" aria-hidden="true" tabindex="-1"></a>vol_1_raw <span class="ot">&lt;-</span> <span class="fu">map</span>(vol_1_all,str_trim)</span>
<span id="cb7-9"><a href="data.html#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="data.html#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co"># The shift is different for session 69 since there is no blank page 4</span></span>
<span id="cb7-11"><a href="data.html#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(s <span class="cf">in</span> <span class="fu">seq_along</span>(vol_1_raw)){</span>
<span id="cb7-12"><a href="data.html#cb7-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(s)</span>
<span id="cb7-13"><a href="data.html#cb7-13" aria-hidden="true" tabindex="-1"></a>  aux_i <span class="ot">&lt;-</span> vol_1_toc[[s]]<span class="sc">$</span>Start_Page[<span class="dv">3</span>] <span class="sc">+</span> <span class="fu">if_else</span>(s <span class="sc">==</span> <span class="dv">6</span>, <span class="dv">3</span>, shift)</span>
<span id="cb7-14"><a href="data.html#cb7-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_detect</span>(<span class="at">string =</span> vol_1_raw[[s]][aux_i], </span>
<span id="cb7-15"><a href="data.html#cb7-15" aria-hidden="true" tabindex="-1"></a>             <span class="at">pattern =</span> <span class="st">&quot;(?&lt;=Special Political)</span><span class="sc">\n\\</span><span class="st">s*(?= and Decol)&quot;</span>) <span class="sc">%&gt;%</span> print</span>
<span id="cb7-16"><a href="data.html#cb7-16" aria-hidden="true" tabindex="-1"></a>  vol_1_raw[[s]][aux_i] <span class="ot">&lt;-</span> <span class="fu">str_remove</span>(<span class="at">string =</span> vol_1_raw[[s]][aux_i], </span>
<span id="cb7-17"><a href="data.html#cb7-17" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">pattern =</span> <span class="st">&quot;(?&lt;=Special Political)</span><span class="sc">\n\\</span><span class="st">s*(?= and Decol)&quot;</span>)</span>
<span id="cb7-18"><a href="data.html#cb7-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-19"><a href="data.html#cb7-19" aria-hidden="true" tabindex="-1"></a>  aux_i <span class="ot">&lt;-</span> vol_1_toc[[s]]<span class="sc">$</span>Start_Page[<span class="dv">6</span>] <span class="sc">+</span> <span class="fu">if_else</span>(s <span class="sc">==</span> <span class="dv">6</span>, <span class="dv">3</span>, shift)</span>
<span id="cb7-20"><a href="data.html#cb7-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_detect</span>(<span class="at">string =</span> vol_1_raw[[s]][aux_i], </span>
<span id="cb7-21"><a href="data.html#cb7-21" aria-hidden="true" tabindex="-1"></a>             <span class="at">pattern =</span> <span class="st">&quot;_+</span><span class="sc">\n</span><span class="st">(</span><span class="sc">\\</span><span class="st">*||∗)</span><span class="sc">\n</span><span class="st">*[[:print:]]*(?=</span><span class="sc">\n\\</span><span class="st">s+</span><span class="sc">\\</span><span class="st">d+$)&quot;</span>) <span class="sc">%&gt;%</span> print</span>
<span id="cb7-22"><a href="data.html#cb7-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_detect</span>(<span class="at">string =</span> vol_1_raw[[s]][aux_i], </span>
<span id="cb7-23"><a href="data.html#cb7-23" aria-hidden="true" tabindex="-1"></a>             <span class="at">pattern =</span> <span class="st">&quot;(?&lt;=Committee)(</span><span class="sc">\\</span><span class="st">*||∗)&quot;</span>) <span class="sc">%&gt;%</span> print</span>
<span id="cb7-24"><a href="data.html#cb7-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_detect</span>(<span class="at">string =</span> vol_1_raw[[s]][aux_i], </span>
<span id="cb7-25"><a href="data.html#cb7-25" aria-hidden="true" tabindex="-1"></a>             <span class="at">pattern =</span> <span class="st">&quot;(((?&lt;=Page</span><span class="sc">\n</span><span class="st">)(</span><span class="sc">\\</span><span class="st">*||∗)</span><span class="sc">\n</span><span class="st">)|((?&lt;=number</span><span class="sc">\n</span><span class="st">)(</span><span class="sc">\\</span><span class="st">*||∗)</span><span class="sc">\n</span><span class="st">))&quot;</span>) <span class="sc">%&gt;%</span> print</span>
<span id="cb7-26"><a href="data.html#cb7-26" aria-hidden="true" tabindex="-1"></a>  vol_1_raw[[s]][aux_i] <span class="ot">&lt;-</span> <span class="fu">str_remove</span>(<span class="at">string =</span> vol_1_raw[[s]][aux_i], </span>
<span id="cb7-27"><a href="data.html#cb7-27" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">pattern =</span> <span class="st">&quot;_+</span><span class="sc">\n</span><span class="st">(</span><span class="sc">\\</span><span class="st">*||∗)</span><span class="sc">\n</span><span class="st">*[[:print:]]*(?=</span><span class="sc">\n\\</span><span class="st">s+</span><span class="sc">\\</span><span class="st">d+$)&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb7-28"><a href="data.html#cb7-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_remove</span>(<span class="at">pattern =</span> <span class="st">&quot;(?&lt;=Committee)(</span><span class="sc">\\</span><span class="st">*||∗)&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb7-29"><a href="data.html#cb7-29" aria-hidden="true" tabindex="-1"></a>    <span class="co">#There may be a hidden * or  at the top of the toc</span></span>
<span id="cb7-30"><a href="data.html#cb7-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_remove</span>(<span class="at">pattern =</span> <span class="st">&quot;(((?&lt;=Page</span><span class="sc">\n</span><span class="st">)(</span><span class="sc">\\</span><span class="st">*||∗)</span><span class="sc">\n</span><span class="st">)|((?&lt;=number</span><span class="sc">\n</span><span class="st">)(</span><span class="sc">\\</span><span class="st">*||∗)</span><span class="sc">\n</span><span class="st">))&quot;</span>)</span>
<span id="cb7-31"><a href="data.html#cb7-31" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-32"><a href="data.html#cb7-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-33"><a href="data.html#cb7-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Volume III</span></span>
<span id="cb7-34"><a href="data.html#cb7-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-35"><a href="data.html#cb7-35" aria-hidden="true" tabindex="-1"></a>vol_3_toc <span class="ot">&lt;-</span> vol_3_toc_check <span class="sc">%&gt;%</span> </span>
<span id="cb7-36"><a href="data.html#cb7-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="sc">~</span>.x <span class="sc">%&gt;%</span> </span>
<span id="cb7-37"><a href="data.html#cb7-37" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mutate</span>(<span class="at">End_Page =</span> <span class="fu">lead</span>(Start_Page, <span class="at">default =</span> <span class="fu">unique</span>(Annex_Page))<span class="sc">-</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb7-38"><a href="data.html#cb7-38" aria-hidden="true" tabindex="-1"></a>        <span class="fu">select</span>(Section, Session, Year, Start_Page, End_Page))</span>
<span id="cb7-39"><a href="data.html#cb7-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-40"><a href="data.html#cb7-40" aria-hidden="true" tabindex="-1"></a>vol_3_raw <span class="ot">&lt;-</span> <span class="fu">map</span>(vol_3_all,str_trim)</span>
<span id="cb7-41"><a href="data.html#cb7-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-42"><a href="data.html#cb7-42" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(s <span class="cf">in</span> <span class="fu">seq_along</span>(vol_3_raw)){</span>
<span id="cb7-43"><a href="data.html#cb7-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(s)</span>
<span id="cb7-44"><a href="data.html#cb7-44" aria-hidden="true" tabindex="-1"></a>  aux_i <span class="ot">&lt;-</span> vol_3_toc[[s]]<span class="sc">$</span>Start_Page[<span class="dv">2</span>] <span class="sc">+</span> shift</span>
<span id="cb7-45"><a href="data.html#cb7-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_detect</span>(<span class="at">string =</span> vol_3_raw[[s]][aux_i],</span>
<span id="cb7-46"><a href="data.html#cb7-46" aria-hidden="true" tabindex="-1"></a>             <span class="at">pattern =</span> <span class="fu">paste0</span>(<span class="st">&quot;(&quot;</span>,</span>
<span id="cb7-47"><a href="data.html#cb7-47" aria-hidden="true" tabindex="-1"></a>                              <span class="st">&quot;((?&lt;=Special Political)</span><span class="sc">\n\\</span><span class="st">s*(?= and Decol))&quot;</span>,</span>
<span id="cb7-48"><a href="data.html#cb7-48" aria-hidden="true" tabindex="-1"></a>                              <span class="st">&quot;|&quot;</span>,</span>
<span id="cb7-49"><a href="data.html#cb7-49" aria-hidden="true" tabindex="-1"></a>                              <span class="st">&quot;((?&lt;=and Decolonization)</span><span class="sc">\n\\</span><span class="st">s*(?= Committee ))&quot;</span>,</span>
<span id="cb7-50"><a href="data.html#cb7-50" aria-hidden="true" tabindex="-1"></a>                              <span class="st">&quot;)&quot;</span>)) <span class="sc">%&gt;%</span> print</span>
<span id="cb7-51"><a href="data.html#cb7-51" aria-hidden="true" tabindex="-1"></a>  vol_3_raw[[s]][aux_i] <span class="ot">&lt;-</span> <span class="fu">str_remove</span>(<span class="at">string =</span> vol_3_raw[[s]][aux_i],</span>
<span id="cb7-52"><a href="data.html#cb7-52" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">pattern =</span> <span class="fu">paste0</span>(<span class="st">&quot;(&quot;</span>,</span>
<span id="cb7-53"><a href="data.html#cb7-53" aria-hidden="true" tabindex="-1"></a>                                                       <span class="st">&quot;((?&lt;=Special Political)</span><span class="sc">\n\\</span><span class="st">s*(?= and Decol))&quot;</span>,</span>
<span id="cb7-54"><a href="data.html#cb7-54" aria-hidden="true" tabindex="-1"></a>                                                       <span class="st">&quot;|&quot;</span>,</span>
<span id="cb7-55"><a href="data.html#cb7-55" aria-hidden="true" tabindex="-1"></a>                                                       <span class="st">&quot;((?&lt;=and Decolonization)</span><span class="sc">\n\\</span><span class="st">s*(?= Committee ))&quot;</span>,</span>
<span id="cb7-56"><a href="data.html#cb7-56" aria-hidden="true" tabindex="-1"></a>                                                       <span class="st">&quot;)&quot;</span>))</span>
<span id="cb7-57"><a href="data.html#cb7-57" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-58"><a href="data.html#cb7-58" aria-hidden="true" tabindex="-1"></a>  aux_i <span class="ot">&lt;-</span> vol_3_toc[[s]]<span class="sc">$</span>Start_Page[<span class="dv">3</span>] <span class="sc">+</span> shift</span>
<span id="cb7-59"><a href="data.html#cb7-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_detect</span>(<span class="at">string =</span> vol_3_raw[[s]][aux_i],</span>
<span id="cb7-60"><a href="data.html#cb7-60" aria-hidden="true" tabindex="-1"></a>             <span class="at">pattern =</span> <span class="fu">paste0</span>(<span class="st">&quot;(&quot;</span>,</span>
<span id="cb7-61"><a href="data.html#cb7-61" aria-hidden="true" tabindex="-1"></a>                              <span class="st">&quot;_+</span><span class="sc">\n</span><span class="st">(</span><span class="sc">\\</span><span class="st">*||∗)</span><span class="sc">\n</span><span class="st">*[[:print:]]*(?=</span><span class="sc">\n\\</span><span class="st">s+</span><span class="sc">\\</span><span class="st">d+$)&quot;</span>,</span>
<span id="cb7-62"><a href="data.html#cb7-62" aria-hidden="true" tabindex="-1"></a>                              <span class="st">&quot;|&quot;</span>,</span>
<span id="cb7-63"><a href="data.html#cb7-63" aria-hidden="true" tabindex="-1"></a>                              <span class="st">&quot;_+</span><span class="sc">\n</span><span class="st">(</span><span class="sc">\\</span><span class="st">*||∗)</span><span class="sc">\n</span><span class="st">*[[:print:]]*</span><span class="sc">\n</span><span class="st">Committee</span><span class="sc">\\</span><span class="st">.(?=</span><span class="sc">\n\\</span><span class="st">s+</span><span class="sc">\\</span><span class="st">d+$)&quot;</span>,</span>
<span id="cb7-64"><a href="data.html#cb7-64" aria-hidden="true" tabindex="-1"></a>                              <span class="st">&quot;)&quot;</span>)) <span class="sc">%&gt;%</span> print</span>
<span id="cb7-65"><a href="data.html#cb7-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_detect</span>(<span class="at">string =</span> vol_3_raw[[s]][aux_i],</span>
<span id="cb7-66"><a href="data.html#cb7-66" aria-hidden="true" tabindex="-1"></a>             <span class="at">pattern =</span> <span class="st">&quot;(?&lt;=Committee)(</span><span class="sc">\\</span><span class="st">*||∗)&quot;</span>) <span class="sc">%&gt;%</span> print</span>
<span id="cb7-67"><a href="data.html#cb7-67" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_detect</span>(<span class="at">string =</span> vol_3_raw[[s]][aux_i],</span>
<span id="cb7-68"><a href="data.html#cb7-68" aria-hidden="true" tabindex="-1"></a>             <span class="at">pattern =</span> <span class="st">&quot;(((?&lt;=Page</span><span class="sc">\n</span><span class="st">)(</span><span class="sc">\\</span><span class="st">*||∗)</span><span class="sc">\n</span><span class="st">)|((?&lt;=number</span><span class="sc">\n</span><span class="st">)(</span><span class="sc">\\</span><span class="st">*||∗)</span><span class="sc">\n</span><span class="st">))&quot;</span>) <span class="sc">%&gt;%</span> print</span>
<span id="cb7-69"><a href="data.html#cb7-69" aria-hidden="true" tabindex="-1"></a>  vol_3_raw[[s]][aux_i] <span class="ot">&lt;-</span> <span class="fu">str_remove</span>(<span class="at">string =</span> vol_3_raw[[s]][aux_i],</span>
<span id="cb7-70"><a href="data.html#cb7-70" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">pattern =</span> <span class="fu">paste0</span>(<span class="st">&quot;(&quot;</span>,</span>
<span id="cb7-71"><a href="data.html#cb7-71" aria-hidden="true" tabindex="-1"></a>                                                       <span class="st">&quot;_+</span><span class="sc">\n</span><span class="st">(</span><span class="sc">\\</span><span class="st">*||∗)</span><span class="sc">\n</span><span class="st">*[[:print:]]*(?=</span><span class="sc">\n\\</span><span class="st">s+</span><span class="sc">\\</span><span class="st">d+$)&quot;</span>,</span>
<span id="cb7-72"><a href="data.html#cb7-72" aria-hidden="true" tabindex="-1"></a>                                                       <span class="st">&quot;|&quot;</span>,</span>
<span id="cb7-73"><a href="data.html#cb7-73" aria-hidden="true" tabindex="-1"></a>                                                       <span class="st">&quot;_+</span><span class="sc">\n</span><span class="st">(</span><span class="sc">\\</span><span class="st">*||∗)</span><span class="sc">\n</span><span class="st">*[[:print:]]*</span><span class="sc">\n</span><span class="st">Committee</span><span class="sc">\\</span><span class="st">.(?=</span><span class="sc">\n\\</span><span class="st">s+</span><span class="sc">\\</span><span class="st">d+$)&quot;</span>,</span>
<span id="cb7-74"><a href="data.html#cb7-74" aria-hidden="true" tabindex="-1"></a>                                                       <span class="st">&quot;)&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb7-75"><a href="data.html#cb7-75" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_remove</span>(<span class="at">pattern =</span> <span class="st">&quot;(?&lt;=Committee)(</span><span class="sc">\\</span><span class="st">*||∗)&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-76"><a href="data.html#cb7-76" aria-hidden="true" tabindex="-1"></a>    <span class="co">#There may be a hidden * or  at the top of the toc</span></span>
<span id="cb7-77"><a href="data.html#cb7-77" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_remove</span>(<span class="at">pattern =</span> <span class="st">&quot;(((?&lt;=Page</span><span class="sc">\n</span><span class="st">)(</span><span class="sc">\\</span><span class="st">*||∗)</span><span class="sc">\n</span><span class="st">)|((?&lt;=number</span><span class="sc">\n</span><span class="st">)(</span><span class="sc">\\</span><span class="st">*||∗)</span><span class="sc">\n</span><span class="st">))&quot;</span>)</span>
<span id="cb7-78"><a href="data.html#cb7-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-79"><a href="data.html#cb7-79" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Once we have cleaned this exceptions we would programmatically remove headers and footers via the following function:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="data.html#cb8-1" aria-hidden="true" tabindex="-1"></a>remove_header_footer <span class="ot">&lt;-</span> <span class="cf">function</span>(raw_page, header){</span>
<span id="cb8-2"><a href="data.html#cb8-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-3"><a href="data.html#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Ensure we have a trimmed page</span></span>
<span id="cb8-4"><a href="data.html#cb8-4" aria-hidden="true" tabindex="-1"></a>  raw_page <span class="ot">&lt;-</span> <span class="fu">str_trim</span>(raw_page)</span>
<span id="cb8-5"><a href="data.html#cb8-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-6"><a href="data.html#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Verify headers, if they don&#39;t match, return NA</span></span>
<span id="cb8-7"><a href="data.html#cb8-7" aria-hidden="true" tabindex="-1"></a>  end_header <span class="ot">&lt;-</span> <span class="fu">nchar</span>(header)</span>
<span id="cb8-8"><a href="data.html#cb8-8" aria-hidden="true" tabindex="-1"></a>  check_header <span class="ot">&lt;-</span> <span class="fu">str_sub</span>(<span class="at">string =</span> raw_page, <span class="at">end =</span> end_header) <span class="sc">==</span> header</span>
<span id="cb8-9"><a href="data.html#cb8-9" aria-hidden="true" tabindex="-1"></a>  end_header <span class="ot">&lt;-</span> <span class="fu">if_else</span>(check_header, end_header, <span class="cn">NA_integer_</span>)</span>
<span id="cb8-10"><a href="data.html#cb8-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-11"><a href="data.html#cb8-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># The footer is usually the document page on its own line, </span></span>
<span id="cb8-12"><a href="data.html#cb8-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># The function returns NA if it doesn&#39;t locate this pattern.</span></span>
<span id="cb8-13"><a href="data.html#cb8-13" aria-hidden="true" tabindex="-1"></a>  start_footer <span class="ot">&lt;-</span> <span class="fu">str_locate</span>(raw_page,<span class="st">&quot;</span><span class="sc">\n\\</span><span class="st">s*</span><span class="sc">\\</span><span class="st">d+$&quot;</span>)[,<span class="st">&quot;start&quot;</span>]</span>
<span id="cb8-14"><a href="data.html#cb8-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-15"><a href="data.html#cb8-15" aria-hidden="true" tabindex="-1"></a>  new_page <span class="ot">&lt;-</span> <span class="fu">str_sub</span>(raw_page,<span class="at">start =</span> end_header <span class="sc">+</span> <span class="dv">1</span>, <span class="at">end =</span> start_footer <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb8-16"><a href="data.html#cb8-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unlist</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb8-17"><a href="data.html#cb8-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_trim</span>()</span>
<span id="cb8-18"><a href="data.html#cb8-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-19"><a href="data.html#cb8-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(new_page)</span>
<span id="cb8-20"><a href="data.html#cb8-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-21"><a href="data.html#cb8-21" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>We can construct a <code>master_tibble</code> object that integrates, for each section and still in raw format, its own table of contents as well as all the resolutions.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="data.html#cb9-1" aria-hidden="true" tabindex="-1"></a>vol_1_master_tibble <span class="ot">&lt;-</span> <span class="fu">seq_along</span>(vol_1_toc) <span class="sc">%&gt;%</span> </span>
<span id="cb9-2"><a href="data.html#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="cf">function</span>(s) vol_1_toc[[s]] <span class="sc">%&gt;%</span> </span>
<span id="cb9-3"><a href="data.html#cb9-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mutate</span>(<span class="at">Raw_Pages =</span> <span class="fu">pmap</span>(<span class="fu">list</span>(Start_Page, End_Page, Section),</span>
<span id="cb9-4"><a href="data.html#cb9-4" aria-hidden="true" tabindex="-1"></a>                                <span class="sc">~</span> vol_1_raw[[s]][..<span class="dv">1</span><span class="sc">:</span>..<span class="dv">2</span> <span class="sc">+</span> <span class="fu">if_else</span>(s <span class="sc">==</span> <span class="dv">6</span>, <span class="dv">3</span>, shift)] <span class="sc">%&gt;%</span> </span>
<span id="cb9-5"><a href="data.html#cb9-5" aria-hidden="true" tabindex="-1"></a>                                  <span class="fu">discard</span>(<span class="sc">~</span>.x <span class="sc">==</span> <span class="st">&quot;&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb9-6"><a href="data.html#cb9-6" aria-hidden="true" tabindex="-1"></a>                                  <span class="fu">remove_header_footer</span>(<span class="fu">paste0</span>(..<span class="dv">3</span>,<span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>))),</span>
<span id="cb9-7"><a href="data.html#cb9-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">First_Resol =</span> <span class="fu">map2_int</span>(Raw_Pages,Session,</span>
<span id="cb9-8"><a href="data.html#cb9-8" aria-hidden="true" tabindex="-1"></a>                                      <span class="sc">~</span><span class="fu">str_detect</span>(.x,<span class="fu">paste</span>(<span class="st">&quot;^RESOLUTION&quot;</span>,.y)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-9"><a href="data.html#cb9-9" aria-hidden="true" tabindex="-1"></a>                                        which <span class="sc">%&gt;%</span> </span>
<span id="cb9-10"><a href="data.html#cb9-10" aria-hidden="true" tabindex="-1"></a>                                        min),</span>
<span id="cb9-11"><a href="data.html#cb9-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">Section_toc =</span> <span class="fu">map2_chr</span>(Raw_Pages,First_Resol,</span>
<span id="cb9-12"><a href="data.html#cb9-12" aria-hidden="true" tabindex="-1"></a>                                      <span class="sc">~</span>.x[<span class="dv">1</span><span class="sc">:</span>(.y<span class="dv">-1</span>)] <span class="sc">%&gt;%</span> </span>
<span id="cb9-13"><a href="data.html#cb9-13" aria-hidden="true" tabindex="-1"></a>                                        <span class="fu">paste</span>(<span class="at">collapse =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)),</span>
<span id="cb9-14"><a href="data.html#cb9-14" aria-hidden="true" tabindex="-1"></a>               <span class="at">Section_res =</span> <span class="fu">map2_chr</span>(Raw_Pages,First_Resol,</span>
<span id="cb9-15"><a href="data.html#cb9-15" aria-hidden="true" tabindex="-1"></a>                                      <span class="sc">~</span>.x[.y<span class="sc">:</span><span class="fu">length</span>(.x)] <span class="sc">%&gt;%</span> </span>
<span id="cb9-16"><a href="data.html#cb9-16" aria-hidden="true" tabindex="-1"></a>                                        <span class="fu">paste</span>(<span class="at">collapse =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb9-17"><a href="data.html#cb9-17" aria-hidden="true" tabindex="-1"></a>        <span class="fu">select</span>(<span class="sc">-</span>Raw_Pages,<span class="sc">-</span>First_Resol))</span>
<span id="cb9-18"><a href="data.html#cb9-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-19"><a href="data.html#cb9-19" aria-hidden="true" tabindex="-1"></a>vol_3_master_tibble <span class="ot">&lt;-</span> <span class="fu">seq_along</span>(vol_3_toc) <span class="sc">%&gt;%</span> </span>
<span id="cb9-20"><a href="data.html#cb9-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="cf">function</span>(s) vol_3_toc[[s]] <span class="sc">%&gt;%</span> </span>
<span id="cb9-21"><a href="data.html#cb9-21" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mutate</span>(<span class="at">Raw_Pages =</span> <span class="fu">pmap</span>(<span class="fu">list</span>(Start_Page, End_Page, Section),</span>
<span id="cb9-22"><a href="data.html#cb9-22" aria-hidden="true" tabindex="-1"></a>                                <span class="sc">~</span> vol_3_raw[[s]][..<span class="dv">1</span><span class="sc">:</span>..<span class="dv">2</span> <span class="sc">+</span> shift] <span class="sc">%&gt;%</span> </span>
<span id="cb9-23"><a href="data.html#cb9-23" aria-hidden="true" tabindex="-1"></a>                                  <span class="fu">discard</span>(<span class="sc">~</span>.x <span class="sc">==</span> <span class="st">&quot;&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb9-24"><a href="data.html#cb9-24" aria-hidden="true" tabindex="-1"></a>                                  <span class="fu">remove_header_footer</span>(<span class="fu">paste0</span>(..<span class="dv">3</span>,<span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>))),</span>
<span id="cb9-25"><a href="data.html#cb9-25" aria-hidden="true" tabindex="-1"></a>               <span class="at">First_Resol =</span> <span class="fu">map2_int</span>(Raw_Pages,Session,</span>
<span id="cb9-26"><a href="data.html#cb9-26" aria-hidden="true" tabindex="-1"></a>                                      <span class="sc">~</span><span class="fu">str_detect</span>(.x,<span class="fu">paste</span>(<span class="st">&quot;^RESOLUTION&quot;</span>,.y)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-27"><a href="data.html#cb9-27" aria-hidden="true" tabindex="-1"></a>                                        which <span class="sc">%&gt;%</span> </span>
<span id="cb9-28"><a href="data.html#cb9-28" aria-hidden="true" tabindex="-1"></a>                                        min),</span>
<span id="cb9-29"><a href="data.html#cb9-29" aria-hidden="true" tabindex="-1"></a>               <span class="at">Section_toc =</span> <span class="fu">map2_chr</span>(Raw_Pages,First_Resol,</span>
<span id="cb9-30"><a href="data.html#cb9-30" aria-hidden="true" tabindex="-1"></a>                                      <span class="sc">~</span>.x[<span class="dv">1</span><span class="sc">:</span>(.y<span class="dv">-1</span>)] <span class="sc">%&gt;%</span> </span>
<span id="cb9-31"><a href="data.html#cb9-31" aria-hidden="true" tabindex="-1"></a>                                        <span class="fu">paste</span>(<span class="at">collapse =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)),</span>
<span id="cb9-32"><a href="data.html#cb9-32" aria-hidden="true" tabindex="-1"></a>               <span class="at">Section_res =</span> <span class="fu">map2_chr</span>(Raw_Pages,First_Resol,</span>
<span id="cb9-33"><a href="data.html#cb9-33" aria-hidden="true" tabindex="-1"></a>                                      <span class="sc">~</span>.x[.y<span class="sc">:</span><span class="fu">length</span>(.x)] <span class="sc">%&gt;%</span> </span>
<span id="cb9-34"><a href="data.html#cb9-34" aria-hidden="true" tabindex="-1"></a>                                        <span class="fu">paste</span>(<span class="at">collapse =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb9-35"><a href="data.html#cb9-35" aria-hidden="true" tabindex="-1"></a>        <span class="fu">select</span>(<span class="sc">-</span>Raw_Pages,<span class="sc">-</span>First_Resol))</span></code></pre></div>
<div id="resolution-texts" class="section level4" number="2.1.2.1">
<h4><span class="header-section-number">2.1.2.1</span> Resolution Texts</h4>
<p>Once we separated the table of contents from the resolution texts we can parse them. A key observation is that each resolution is signaled by an upper letter heading such as <strong>RESOLUTION 75/1</strong>, <strong>RESOLUTIONS 75/101 A and B</strong> or <strong>RESOLUTIONS 75/254 A-C</strong> depending on whether it’s a standalone resolution or it has two or more subresolutions. Then, each resolution contains metadata on it’s adoption such as session, date, voting data, or sponsorship. The actual resolutions start by it’s resolution number and a period on its own line (e.g. 75/1.). We use these patterns to separate all resolutions and identify the text as well as the metadata.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="data.html#cb10-1" aria-hidden="true" tabindex="-1"></a>vol_1_resol_text_df <span class="ot">&lt;-</span> vol_1_master_tibble <span class="sc">%&gt;%</span> </span>
<span id="cb10-2"><a href="data.html#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_dfr</span>(<span class="sc">~</span> .x<span class="sc">$</span>Section_res <span class="sc">%&gt;%</span> </span>
<span id="cb10-3"><a href="data.html#cb10-3" aria-hidden="true" tabindex="-1"></a>            <span class="fu">paste</span>(<span class="at">collapse =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb10-4"><a href="data.html#cb10-4" aria-hidden="true" tabindex="-1"></a>            <span class="fu">str_split</span>(<span class="at">pattern =</span> <span class="st">&quot;(?=RESOLUTION)&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb10-5"><a href="data.html#cb10-5" aria-hidden="true" tabindex="-1"></a>            unlist <span class="sc">%&gt;%</span> </span>
<span id="cb10-6"><a href="data.html#cb10-6" aria-hidden="true" tabindex="-1"></a>            <span class="fu">tibble</span>(<span class="at">Resolution_Text =</span> .) <span class="sc">%&gt;%</span> </span>
<span id="cb10-7"><a href="data.html#cb10-7" aria-hidden="true" tabindex="-1"></a>            <span class="fu">slice</span>(<span class="sc">-</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb10-8"><a href="data.html#cb10-8" aria-hidden="true" tabindex="-1"></a>            <span class="fu">separate</span>(<span class="at">col =</span> Resolution_Text, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;Resolution_Header&quot;</span>,<span class="st">&quot;Aux&quot;</span>), </span>
<span id="cb10-9"><a href="data.html#cb10-9" aria-hidden="true" tabindex="-1"></a>                     <span class="at">sep=</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>, <span class="at">extra =</span> <span class="st">&quot;merge&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb10-10"><a href="data.html#cb10-10" aria-hidden="true" tabindex="-1"></a>            <span class="fu">mutate</span>(<span class="at">UNRES =</span> <span class="fu">str_extract</span>(Resolution_Header,<span class="st">&quot;</span><span class="sc">\\</span><span class="st">d+/</span><span class="sc">\\</span><span class="st">d+&quot;</span>), </span>
<span id="cb10-11"><a href="data.html#cb10-11" aria-hidden="true" tabindex="-1"></a>                   <span class="at">Aux =</span> <span class="fu">str_trim</span>(Aux),</span>
<span id="cb10-12"><a href="data.html#cb10-12" aria-hidden="true" tabindex="-1"></a>                   <span class="at">Aux_Pos =</span> <span class="fu">map2</span>(Aux,UNRES,<span class="sc">~</span><span class="fu">str_locate</span>(.x, <span class="at">pattern =</span> <span class="fu">paste0</span>(.y,<span class="st">&quot;</span><span class="sc">\\</span><span class="st">.</span><span class="sc">\\</span><span class="st">s+&quot;</span>))), </span>
<span id="cb10-13"><a href="data.html#cb10-13" aria-hidden="true" tabindex="-1"></a>                   <span class="at">Start_Pos =</span> <span class="fu">map_int</span>(Aux_Pos,<span class="sc">~</span>.x[<span class="dv">1</span>,<span class="st">&quot;start&quot;</span>]), </span>
<span id="cb10-14"><a href="data.html#cb10-14" aria-hidden="true" tabindex="-1"></a>                   <span class="at">End_Pos =</span> <span class="fu">map_int</span>(Aux_Pos,<span class="sc">~</span>.x[<span class="dv">1</span>,<span class="st">&quot;end&quot;</span>]), </span>
<span id="cb10-15"><a href="data.html#cb10-15" aria-hidden="true" tabindex="-1"></a>                   <span class="at">Resol_Meta =</span> <span class="fu">map2_chr</span>(Aux,Start_Pos,<span class="sc">~</span><span class="fu">str_sub</span>(.x,<span class="at">end =</span> .y <span class="sc">-</span> <span class="dv">1</span>)), </span>
<span id="cb10-16"><a href="data.html#cb10-16" aria-hidden="true" tabindex="-1"></a>                   <span class="at">Resol_Text =</span> <span class="fu">map2_chr</span>(Aux,End_Pos, <span class="sc">~</span> <span class="fu">str_sub</span>(.x,<span class="at">start =</span> .y <span class="sc">+</span> <span class="dv">1</span>)),</span>
<span id="cb10-17"><a href="data.html#cb10-17" aria-hidden="true" tabindex="-1"></a>                   <span class="at">Resol_Text_WPOP =</span> Resol_Text <span class="sc">%&gt;%</span> </span>
<span id="cb10-18"><a href="data.html#cb10-18" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">str_remove_all</span>(<span class="st">&quot;(?&lt;=</span><span class="sc">\n</span><span class="st">)</span><span class="sc">\\</span><span class="st">s+[A-Z][a-z]*ing&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb10-19"><a href="data.html#cb10-19" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">str_remove_all</span>(<span class="st">&quot;(?&lt;=</span><span class="sc">\n</span><span class="st">)</span><span class="sc">\\</span><span class="st">s+</span><span class="sc">\\</span><span class="st">d+</span><span class="sc">\\</span><span class="st">.</span><span class="sc">\\</span><span class="st">s+[A-Z][a-z]*&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb10-20"><a href="data.html#cb10-20" aria-hidden="true" tabindex="-1"></a>            <span class="fu">select</span>(UNRES,Resol_Meta,Resol_Text,Resol_Text_WPOP))</span>
<span id="cb10-21"><a href="data.html#cb10-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-22"><a href="data.html#cb10-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Double check hidden characters and RES/73/293</span></span>
<span id="cb10-23"><a href="data.html#cb10-23" aria-hidden="true" tabindex="-1"></a>vol_3_resol_text_df <span class="ot">&lt;-</span> vol_3_master_tibble <span class="sc">%&gt;%</span> </span>
<span id="cb10-24"><a href="data.html#cb10-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_dfr</span>(<span class="sc">~</span> .x<span class="sc">$</span>Section_res <span class="sc">%&gt;%</span> </span>
<span id="cb10-25"><a href="data.html#cb10-25" aria-hidden="true" tabindex="-1"></a>            <span class="fu">paste</span>(<span class="at">collapse =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb10-26"><a href="data.html#cb10-26" aria-hidden="true" tabindex="-1"></a>            <span class="fu">str_split</span>(<span class="at">pattern =</span> <span class="st">&quot;(?=RESOLUTION)&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb10-27"><a href="data.html#cb10-27" aria-hidden="true" tabindex="-1"></a>            unlist <span class="sc">%&gt;%</span> </span>
<span id="cb10-28"><a href="data.html#cb10-28" aria-hidden="true" tabindex="-1"></a>            <span class="fu">tibble</span>(<span class="at">Resolution_Text =</span> .) <span class="sc">%&gt;%</span> </span>
<span id="cb10-29"><a href="data.html#cb10-29" aria-hidden="true" tabindex="-1"></a>            <span class="fu">slice</span>(<span class="sc">-</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb10-30"><a href="data.html#cb10-30" aria-hidden="true" tabindex="-1"></a>            <span class="fu">separate</span>(<span class="at">col =</span> Resolution_Text, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;Resolution_Header&quot;</span>,<span class="st">&quot;Aux&quot;</span>), </span>
<span id="cb10-31"><a href="data.html#cb10-31" aria-hidden="true" tabindex="-1"></a>                     <span class="at">sep=</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>, <span class="at">extra =</span> <span class="st">&quot;merge&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb10-32"><a href="data.html#cb10-32" aria-hidden="true" tabindex="-1"></a>            <span class="fu">mutate</span>(<span class="at">UNRES =</span> <span class="fu">str_extract</span>(Resolution_Header,<span class="st">&quot;</span><span class="sc">\\</span><span class="st">d+/</span><span class="sc">\\</span><span class="st">d+&quot;</span>), </span>
<span id="cb10-33"><a href="data.html#cb10-33" aria-hidden="true" tabindex="-1"></a>                   <span class="at">Aux =</span> <span class="fu">str_trim</span>(Aux),</span>
<span id="cb10-34"><a href="data.html#cb10-34" aria-hidden="true" tabindex="-1"></a>                   <span class="at">Aux_Pos =</span> <span class="fu">map2</span>(Aux,UNRES,<span class="sc">~</span><span class="fu">str_locate</span>(.x, <span class="at">pattern =</span> <span class="fu">paste0</span>(.y,<span class="st">&quot;</span><span class="sc">\\</span><span class="st">.</span><span class="sc">\\</span><span class="st">s+&quot;</span>))), </span>
<span id="cb10-35"><a href="data.html#cb10-35" aria-hidden="true" tabindex="-1"></a>                   <span class="at">Start_Pos =</span> <span class="fu">map_int</span>(Aux_Pos,<span class="sc">~</span>.x[<span class="dv">1</span>,<span class="st">&quot;start&quot;</span>]), </span>
<span id="cb10-36"><a href="data.html#cb10-36" aria-hidden="true" tabindex="-1"></a>                   <span class="at">End_Pos =</span> <span class="fu">map_int</span>(Aux_Pos,<span class="sc">~</span>.x[<span class="dv">1</span>,<span class="st">&quot;end&quot;</span>]), </span>
<span id="cb10-37"><a href="data.html#cb10-37" aria-hidden="true" tabindex="-1"></a>                   <span class="at">Resol_Meta =</span> <span class="fu">map2_chr</span>(Aux,Start_Pos,<span class="sc">~</span><span class="fu">str_sub</span>(.x,<span class="at">end =</span> .y <span class="sc">-</span> <span class="dv">1</span>)), </span>
<span id="cb10-38"><a href="data.html#cb10-38" aria-hidden="true" tabindex="-1"></a>                   <span class="at">Resol_Text =</span> <span class="fu">map2_chr</span>(Aux,End_Pos, <span class="sc">~</span> <span class="fu">str_sub</span>(.x,<span class="at">start =</span> .y <span class="sc">+</span> <span class="dv">1</span>)),</span>
<span id="cb10-39"><a href="data.html#cb10-39" aria-hidden="true" tabindex="-1"></a>                   <span class="at">Resol_Text_WPOP =</span> Resol_Text <span class="sc">%&gt;%</span> </span>
<span id="cb10-40"><a href="data.html#cb10-40" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">str_remove_all</span>(<span class="st">&quot;(?&lt;=</span><span class="sc">\n</span><span class="st">)</span><span class="sc">\\</span><span class="st">s+[A-Z][a-z]*ing&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb10-41"><a href="data.html#cb10-41" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">str_remove_all</span>(<span class="st">&quot;(?&lt;=</span><span class="sc">\n</span><span class="st">)</span><span class="sc">\\</span><span class="st">s+</span><span class="sc">\\</span><span class="st">d+</span><span class="sc">\\</span><span class="st">.</span><span class="sc">\\</span><span class="st">s+[A-Z][a-z]*&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb10-42"><a href="data.html#cb10-42" aria-hidden="true" tabindex="-1"></a>            <span class="fu">select</span>(UNRES,Resol_Meta,Resol_Text,Resol_Text_WPOP))</span></code></pre></div>
<p>There is, however, a last cleaning in the column <code>Resol_Text_WPOP</code>. This name referes to resolution texts <em>without preambulatory and operative phrases</em>. These are common phrases that are always present in UNGA resolutions since they indicate the structure explained <a href="https://research.un.org/en/docs/resolutions">here</a> <span class="citation">(Kurtas, n.d.b)</span>. As the next step in the analysis will be text mining, we could consider all these phrases as noise within the UNGA context so it is useful to have two versions of the resolutions, one without them and one original that keeps them.</p>
<p>We have now completed the main process of data cleaning, we can join all the resolutions and save the data.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="data.html#cb11-1" aria-hidden="true" tabindex="-1"></a>resol_text_df <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(<span class="fu">mutate</span>(vol_1_resol_text_df, <span class="at">Vol =</span> <span class="st">&quot;1&quot;</span>),</span>
<span id="cb11-2"><a href="data.html#cb11-2" aria-hidden="true" tabindex="-1"></a>                           <span class="fu">mutate</span>(vol_3_resol_text_df, <span class="at">Vol =</span> <span class="st">&quot;3&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb11-3"><a href="data.html#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ID_FAZH =</span> <span class="fu">paste</span>(Vol,UNRES,<span class="at">sep=</span><span class="st">&quot;/&quot;</span>))</span>
<span id="cb11-4"><a href="data.html#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="data.html#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(resol_text_df, <span class="at">file =</span> <span class="fu">here</span>(<span class="st">&quot;resol_data&quot;</span>,<span class="st">&quot;resol_text_df.RData&quot;</span>))</span></code></pre></div>
</div>
</div>
</div>
<div id="voting-data" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Voting Data</h2>
<p>While we could parse voting data from the metadata of resolutions in the compilation pdfs. We can recover an already processed data set on voting records for the UNGA <span class="citation">(Voeten, Strezhnev, and Bailey 2021)</span>:</p>
<p>Accesed and downloaded on June 15, 2021
available at <a href="https://dataverse.harvard.edu/dataset.xhtml?persistentId=doi:10.7910/DVN/LEJUQZ" class="uri">https://dataverse.harvard.edu/dataset.xhtml?persistentId=doi:10.7910/DVN/LEJUQZ</a></p>
<ul>
<li>Erik Voeten, “Data and Analyses of Voting in the UN General Assembly” Routledge Handbook of International Organization, edited by Bob Reinalda (published May 27, 2013)</li>
<li>Bailey, Michael A., Anton Strezhnev, and Erik Voeten. 2017. Estimating dynamic state preferences from united nations voting data. Journal of Conflict Resolution 61 (2): 430-56.</li>
</ul>
<p><strong>FALTA EXPLICAR DATOS DE VOTOS</strong></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="references.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
